title Add Incoming Order

actor User
participant Main
participant Restaurant
participant Serialization
participant OrderWrapper
participant Order
participant Item
participant Map

User -> Main : select "Add Order"
Main -> Restaurant : addOrder()
Restaurant -> User : prompt "Load order (JSON path)"
User -> Restaurant : filename
Restaurant -> Serialization : readOrder(filename)
Serialization --> Restaurant : OrderWrapper
Restaurant -> OrderWrapper : getOrder()
OrderWrapper --> Restaurant : Order

alt validate order contents
Restaurant -> Order : getItems()
Order --> Restaurant : List<Item>
loop for each Item
Restaurant -> Item : validate (name, qty, price)
Item --> Restaurant : ok
end
end

Restaurant -> Order : setOrderStatus(NEW)
Restaurant -> Order : setOrderId(++ID)
Restaurant -> Map : put(ID, OrderWrapper)
Map --> Restaurant : stored

Restaurant -> User : "Order added with ID = ID"

alt invalid JSON / I-O error
Serialization --> Restaurant : error
Restaurant -> User : "Failed to load order"
end